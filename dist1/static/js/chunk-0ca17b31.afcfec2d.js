(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ca17b31"],{a54c:function(e,r,t){},d5c2:function(e,r,t){"use strict";t.r(r);var s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"register-container"},[t("el-form",{ref:"registerForm",staticClass:"register-form",attrs:{model:e.registerForm,rules:e.registerRules,"label-position":"left","label-width":"100px"}},[t("div",{staticClass:"title-container"},[t("h3",{staticClass:"title"},[e._v("注 册")])]),t("el-form-item",{attrs:{label:"用户名:",prop:"username"}},[t("el-input",{model:{value:e.registerForm.username,callback:function(r){e.$set(e.registerForm,"username",r)},expression:"registerForm.username"}})],1),t("el-form-item",{attrs:{label:"密码:",prop:"password"}},[t("el-input",{attrs:{type:"password"},model:{value:e.registerForm.password,callback:function(r){e.$set(e.registerForm,"password",r)},expression:"registerForm.password"}})],1),t("el-form-item",{attrs:{label:"确认密码:",prop:"rePassword"}},[t("el-input",{attrs:{type:"password"},model:{value:e.registerForm.rePassword,callback:function(r){e.$set(e.registerForm,"rePassword",r)},expression:"registerForm.rePassword"}})],1),t("el-form-item",{attrs:{label:"邮箱:",prop:"email"}},[t("el-input",{attrs:{type:"email",autofocus:!1},model:{value:e.registerForm.email,callback:function(r){e.$set(e.registerForm,"email",r)},expression:"registerForm.email"}})],1),t("el-row",{attrs:{gutter:16}},[t("el-col",{attrs:{span:18,offset:0}},[t("el-form-item",{attrs:{label:"邮箱验证码:",prop:"code"}},[t("el-input",{model:{value:e.registerForm.code,callback:function(r){e.$set(e.registerForm,"code",r)},expression:"registerForm.code"}})],1)],1),t("el-col",{attrs:{span:6,offset:0}},[t("el-button",{staticClass:"sendCodeBtn",attrs:{type:"primary",plain:"",size:"default",disabled:e.isDisabled},on:{click:e.sendCode}},[e._v(e._s(e.sendText))])],1)],1),t("el-form-item",[t("div",{staticClass:"btnWrap clearfix"},[t("p",{staticClass:"tipText"},[e._v(" 已有账号？"),t("span",{on:{click:e.handleToLogin}},[e._v("点击登录")])]),t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitRegister("ruleForm")}}},[e._v("注 册")])],1)])],1)],1)},a=[],i=t("6a41"),o=t("5314"),l=t("d702"),n={name:"register",data:function(){var e=this,r=function(e,r,t){if(r){var s=/^[\u4E00-\u9FA5A-Za-z0-9]+$/;s.test(r)?Object(i["l"])(r).then((function(e){201==e.data.status?t(e.data.msg):t()})):t(new Error("名字不能包含特殊字符"))}else t("请输入用户名")},t=function(e,r,t){r?t():t(new Error("请输入密码"))},s=function(r,t,s){t?t!=e.registerForm.password?s(new Error("两次输入密码不一致")):s():s(new Error("请输入确认密码"))},a=function(r,t,s){if(t){var a=/^[a-zA-Z0-9_-]+@([a-z0-9]+[-a-z0-9]*[a-z0-9]+\.)+(com|cn|net|org)$/;a.test(t)?Object(i["k"])(t).then((function(r){201==r.data.status?s("该邮箱已被注册"):(e.isDisabled=!1,e.passValidatorEmail=!0,s())})):s("邮箱格式不正确")}else s(new Error("请输入邮箱"))};return{registerForm:{username:"",password:"",rePassword:"",email:"",code:""},registerRules:{username:[{required:!0,validator:r,trigger:"blur"}],password:[{required:!0,validator:t,trigger:"blur"},{required:!0,min:5,message:"密码长度少于5位",trigger:"blur"}],rePassword:[{required:!0,validator:s,trigger:"blur"}],email:[{required:!0,validator:a,trigger:"blur"}],code:[{required:!0,message:"请输入邮箱验证码",trigger:"blur"}]},sendText:"发送验证码",passValidatorEmail:!1,msgTime:60,timer:null,isDisabled:!0}},methods:{sendCode:function(){var e=this;if(this.registerForm.email){if(this.passValidatorEmail){var r={email:this.registerForm.email};Object(o["i"])(r).then((function(r){if(200===r.data.status){e.$message.success("验证码发送成功"),e.isDisabled=!0;var t=e;t.timer=setInterval((function(){e.msgTime--,e.sendText=e.msgTime+"秒后重试",0===e.msgTime&&(e.msgTime=60,e.sendText="发送验证码",e.isDisabled=!1,clearInterval(t.timer))}),1e3)}}))}}else this.$message.warning("请先输入邮箱")},handleToLogin:function(){this.$router.push({path:"/login"})},submitRegister:function(){var e=this;this.$refs.registerForm.validate((function(r){if(r){var t={username:e.registerForm.username,password:e.registerForm.password,postCode:e.registerForm.code,email:e.registerForm.email},s={data:Object(l["b"])(t)};Object(o["a"])(s).then((function(r){202===r.data.status||201===r.data.status?e.$message.error(r.data.msg):(e.$message.success(r.data.msg),e.$refs.registerForm.resetFields(),e.$router.push({path:"/login"}))}))}}))}},beforeDestroy:function(){clearInterval(this.timer)}},m=n,u=(t("e0a1"),t("5d22")),c=Object(u["a"])(m,s,a,!1,null,"c872ed2c",null);r["default"]=c.exports},e0a1:function(e,r,t){"use strict";t("a54c")}}]);